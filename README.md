# pleasant

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Tests](https://github.com/Integrated-Quantum-Photonics-Group/pleasant/workflows/Tests/badge.svg)](https://github.com/Integrated-Quantum-Photonics-Group/pleasant/actions?workflow=Tests)
[![Docs](https://github.com/Integrated-Quantum-Photonics-Group/pleasant/workflows/Docs/badge.svg)](https://github.com/Integrated-Quantum-Photonics-Group/pleasant/actions?workflow=Docs)
[![Codecov](https://codecov.io/gh/Integrated-Quantum-Photonics-Group/pleasant/branch/main/graph/badge.svg)](https://codecov.io/gh/Integrated-Quantum-Photonics-Group/pleasant)

## Overview

This package aims at making the analysis of [photoluminescence excitation](https://en.wikipedia.org/wiki/Photoluminescence_excitation) (PLE)
measurement data a pleasant experience.
It's main building block is the `Measurement` class. Objects of this class are generated by a loader function.
It reads all data files generated by a group of measurements in a directory.

At the moment, only one loader for one specific data saving scheme exists.
However, if you write your own custom loader function for your data saving scheme,
you can still make use of all data analysis features of this package.

## Attribution

If you are publishing any work based on using pleasant as an analysis tool, please mention it e.g. in the methods section
and consider citing the original scientific work that this package was written for:

[Optically coherent nitrogen-vacancy defect centers in diamond nanostructures](https://arxiv.org/abs/2203.05605)

## Features

- independent and extendable data loading functions
- convenient handling of measurement metadata with the dedicated [`Measurement`](src/pleasant/measurement.py) class
  - access to measurement metadata (scan speed, scan range, user-defined description, ...)
  - rebinning of data
  - simple photon-count threshold filtering
- typical PLE analysis routines, e.g. for the extraction of homogeneous and inhomogeneous linewidths
  - fitting and plotting a sum of all PLE scans with [lmfit](https://lmfit.github.io/lmfit-py/) and [matplotlib](https://matplotlib.org)
  - fitting of individual PLE scans with a peak-like model (Gaussian, Lorentzian, Voigt, Pseudo-Voigt)
  - plotting of scans with or without fit
  - straight-forward export of scan fit results as a [pandas](https://pandas.pydata.org) dataframe retaining all measurement metadata
- computation of time-normalized spectral jumps for extraction of the spectral diffusion rate

## Installation

pleasant is provided as a pip-installable Python package. You can clone or download this repository to your
local machine and install the package by running

`pip install -e .`

in the package directory. Note that a recent version of `pip` is required for the installation. Try updating `pip`
in case this step fails.

To run the demo notebook or work in notebooks in general, you need to install
[Jupyter Lab](https://jupyter.org/install) or the classic Jupyter Notebook if it is not already installed in your
environment. You might want to copy the [`examples`](examples/) directory to wherever you are going to work
on your data analysis for easier access and to leave the package directory clean.

## Documentation

The main resource for getting started is the [demo notebook](examples/demo.ipynb). It is located in the `examples` directory.
In addition, most functions in the code are documented with docstrings.
